* { box-sizing: border-box; }
body { margin: 0; font-family: system-ui, sans-serif; }

.dashboard, .chat-page { max-width: 900px; margin: 0 auto; padding: 1rem; }
.dashboard h1, .chat-page header h1 { margin-top: 0; }
.subtitle { color: #666; }
nav { margin: 1rem 0; }
nav a { margin-right: 1rem; }
.channel-overview ul { list-style: none; padding: 0; }
.channel-overview li { display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem; border-bottom: 1px solid #eee; }
.channel-overview li.connected .status { color: green; }
.channel-overview li.disconnected .status { color: #999; }
.channel-overview .name { font-weight: 600; min-width: 120px; }
.channel-overview button { margin-left: auto; }
.error { color: #c00; }

.chat-layout { display: flex; gap: 1rem; margin-top: 1rem; }
.channel-selector { flex: 0 0 220px; border-right: 1px solid #eee; padding-right: 1rem; }
.channel-selector h3 { margin-top: 0; }
.channel-selector ul { list-style: none; padding: 0; }
.channel-selector li { display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem; }
.channel-selector li.connected { color: green; }
.channel-selector label { display: flex; align-items: center; gap: 0.25rem; flex: 1; }
.channel-selector .widget-type { font-size: 0.85em; color: #666; }
.chat-main { flex: 1; display: flex; flex-direction: column; min-height: 400px; }
.message-list { flex: 1; overflow-y: auto; border: 1px solid #eee; border-radius: 8px; padding: 1rem; margin-bottom: 0.5rem; min-height: 200px; }
.message { margin-bottom: 0.75rem; }
.message .role { font-size: 0.75em; text-transform: uppercase; color: #666; margin-right: 0.5rem; }
.message .channel-badge { font-size: 0.75em; background: #eee; padding: 0.1rem 0.4rem; border-radius: 4px; margin-right: 0.5rem; }
.message.user .content { color: #06c; }
.message-list .empty { color: #999; }
.context-actions { margin-bottom: 0.5rem; padding: 0.5rem; background: #f8f8f8; border-radius: 8px; }
.context-actions h4 { margin: 0 0 0.5rem 0; }
.context-actions .clear-context, .context-actions .set-context { display: flex; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem; }
.context-actions input[type="text"] { flex: 1; min-width: 0; }
.input-area { display: flex; gap: 0.5rem; }
.input-area input { flex: 1; padding: 0.5rem; border: 1px solid #ccc; border-radius: 4px; }
.input-area button { padding: 0.5rem 1rem; }

/* Scanner page */
.scanner-page { max-width: 900px; margin: 0 auto; padding: 1rem; }
.scanner-page h1 { margin-top: 0; }
.scanner-page .loading { color: #666; font-style: italic; }
.scan-inputs { margin: 1.5rem 0; }
.scan-inputs h2 { font-size: 1rem; margin: 1rem 0 0.5rem; }
.scan-inputs .input-row { display: flex; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem; }
.scan-inputs .url-input { flex: 1; padding: 0.5rem; border: 1px solid #ccc; border-radius: 4px; }
.scan-inputs .seeds-input { width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 4px; font-family: inherit; resize: vertical; margin-bottom: 0.5rem; }
.scan-inputs button { padding: 0.5rem 1rem; }
.scan-results { margin-top: 1.5rem; border-top: 1px solid #eee; padding-top: 1rem; }
.scan-results h2 { font-size: 1rem; margin-top: 0; }
.scan-results ul { list-style: none; padding: 0; }
.scan-results li { padding: 0.75rem; border: 1px solid #eee; border-radius: 8px; margin-bottom: 0.5rem; }
.scan-results.identified li { display: flex; align-items: center; gap: 0.5rem; flex-wrap: wrap; }
.scan-results.identified .widget-type { font-weight: 600; min-width: 80px; }
.scan-results.identified .url { flex: 1; min-width: 0; overflow: hidden; text-overflow: ellipsis; font-size: 0.9em; color: #666; }
.scan-results.identified .confidence { font-size: 0.85em; }
.scan-results.wipe-results li.success { border-color: #8c8; background: #f8fff8; }
.scan-results.wipe-results li.failed { border-color: #c88; background: #fff8f8; }
.scan-results .result-header { display: flex; align-items: center; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 0.5rem; }
.scan-results .result-header .widget-type { font-weight: 600; }
.scan-results .result-header .url { flex: 1; min-width: 0; font-size: 0.9em; color: #666; }
.scan-results .result-header .strategy { font-size: 0.85em; background: #eee; padding: 0.1rem 0.4rem; border-radius: 4px; }
.scan-results .result-header .success-badge { font-size: 0.85em; font-weight: 600; }
.scan-results .result-actions { margin-top: 0.5rem; }
.scan-results .result-actions button { padding: 0.35rem 0.75rem; }

/* Preset security tests */
.scan-results.identified li { display: flex; align-items: center; gap: 0.5rem; flex-wrap: wrap; }
.preset-tests-btn { margin-left: 0.25rem; }
.scan-results.preset-categories { margin-top: 1rem; }
.preset-category-list { list-style: none; padding: 0; }
.preset-category-list li { padding: 0.5rem 0; border-bottom: 1px solid #eee; display: flex; flex-direction: column; gap: 0.25rem; }
.preset-category-list label { display: flex; align-items: center; gap: 0.5rem; cursor: pointer; }
.preset-cat-name { font-weight: 600; }
.preset-cat-desc { font-size: 0.9em; color: #666; }
.preset-cat-count { font-size: 0.85em; color: #999; }
.scan-results.preset-results ul { list-style: none; padding: 0; }
.scan-results.preset-results li { padding: 0.75rem; border: 1px solid #eee; border-radius: 8px; margin-bottom: 0.5rem; }
.scan-results.preset-results li.preset-error { border-color: #c88; background: #fff8f8; }
.preset-result-header { margin-bottom: 0.35rem; }
.preset-cat { font-weight: 600; font-size: 0.95em; }
.preset-payload { font-size: 0.85em; color: #555; margin-bottom: 0.35rem; white-space: pre-wrap; word-break: break-word; max-height: 4em; overflow: hidden; text-overflow: ellipsis; }
.preset-reply { font-size: 0.9em; white-space: pre-wrap; word-break: break-word; max-height: 8em; overflow-y: auto; }
.preset-reply.error { color: #c00; }
.preset-target { font-size: 0.9em; color: #666; margin-bottom: 0.5rem; }
